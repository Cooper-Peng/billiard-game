
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="duck-life-adventure.title">Duck Life Adventure | xGame.best</title>
    <meta name="description" data-i18n="duck-life-adventure.description" content="Let your genetically modified duck embark on a new adventure!">
    <link rel="canonical" href="https://xGame.best/games/duck-life-adventure.html" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#FF6B6B',
                        'secondary': '#4ECDC4',
                        'dark': '#2D3436',
                        'light': '#F7F7F7'
                    }
                }
            }
        }
    </script>
    <style>
        /* æ¸¸æˆæ¨èå¡ç‰‡æ ·å¼ - å®Œå…¨åŒ¹é…main.html */
        .game-card-recommendation {
            transition: all 0.3s cubic-bezier(.4,2,.3,1);
            width: 190px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .game-card-recommendation:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: 0 12px 40px rgba(20, 184, 166, 0.2);
            border-color: #14B8A6;
        }
        
        .game-card-recommendation img {
            width: 190px;
            height: 170px;
            object-fit: contain;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            margin: 0 auto;
            display: block;
            border-radius: 16px 16px 0 0;
            transition: transform 0.35s cubic-bezier(.4,2,.3,1);
        }
        
        .game-card-recommendation:hover img {
            transform: scale(1.05);
        }
        
        .game-card-recommendation .p-4 {
            padding: 1rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.95));
        }
        
        .game-card-recommendation h3 {
            font-size: 1rem;
            line-height: 1.35rem;
            margin-bottom: 0.25rem;
            color: #22223b;
            font-weight: 700;
            letter-spacing: 0.01em;
        }
        
        .game-card-recommendation p {
            font-size: 0.8rem;
            line-height: 1.1rem;
            margin-bottom: 0.5rem;
            color: #666;
        }
        
        .game-card-recommendation .rating-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            background: rgba(20, 184, 166, 0.05);
            border-radius: 8px;
        }

        .game-card-recommendation .stars {
            color: #fbbf24;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
        }

        .game-card-recommendation .rating-score {
            font-weight: 600;
            color: #14B8A6;
            font-size: 0.875rem;
        }

        .game-card-recommendation .game-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .game-card-recommendation .category-pill {
            font-size: 0.75rem;
            font-weight: 500;
            font-family: Arial, sans-serif;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            white-space: nowrap;
            text-align: center;
            background: linear-gradient(135deg, #bfdbfe, #e0f2fe);
            color: #1e40af;
            border: none;
            box-shadow: 0 2px 4px rgba(30, 64, 175, 0.1);
            transition: all 0.3s ease;
        }
        
        .game-card-recommendation .category-pill:hover {
            background: linear-gradient(135deg, #93c5fd, #bfdbfe);
            color: #1d4ed8;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(30, 64, 175, 0.2);
        }
        
        /* æ°´å¹³å¡ç‰‡æ ·å¼ - ç”¨äºç›¸å…³æ¸¸æˆ */
        .game-card-horizontal {
            flex: 0 0 190px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.3);
            position: relative;
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(.4,2,.3,1);
        }

        .game-card-horizontal:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: 0 12px 40px rgba(20, 184, 166, 0.2);
            border-color: #14B8A6;
        }

        .game-card-horizontal img {
            width: 190px;
            height: 170px;
            object-fit: contain;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            margin: 0 auto;
            display: block;
            border-radius: 16px 16px 0 0;
            transition: transform 0.35s cubic-bezier(.4,2,.3,1);
        }

        .game-card-horizontal:hover img {
            transform: scale(1.05);
        }

        .game-card-horizontal .p-4 {
            padding: 1rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.95));
        }

        .game-card-horizontal h3 {
            font-size: 1rem;
            line-height: 1.35rem;
            margin-bottom: 0.25rem;
            color: #22223b;
            font-weight: 700;
            letter-spacing: 0.01em;
        }

        .game-card-horizontal p {
            font-size: 0.8rem;
            line-height: 1.1rem;
            margin-bottom: 0.5rem;
            color: #666;
        }

        .game-card-horizontal .rating-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            background: rgba(20, 184, 166, 0.05);
            border-radius: 8px;
        }

        .game-card-horizontal .stars {
            color: #fbbf24;
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
        }

        .game-card-horizontal .rating-score {
            font-weight: 600;
            color: #14B8A6;
            font-size: 0.875rem;
        }

        .game-card-horizontal .game-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .game-card-horizontal .horizontal-tag {
            transition: all 0.3s ease;
            background: linear-gradient(135deg, rgba(20, 184, 166, 0.1), rgba(139, 92, 246, 0.1));
            color: #14B8A6;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border: 1px solid rgba(20, 184, 166, 0.3);
            backdrop-filter: blur(10px);
        }

        .game-card-horizontal .horizontal-tag:hover {
            background: linear-gradient(135deg, #14B8A6, #8B5CF6);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(20, 184, 166, 0.3);
        }
        
        /* å³ä¾§è¾¹æ æ¨èæ¸¸æˆå¡ç‰‡æ ·å¼ */
        .game-card-sidebar {
            transition: all 0.3s ease;
            width: 100%;
            background: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #e5e7eb;
            padding: 0;
            margin-bottom: 1rem;
            position: relative;
            min-height: 100px;
        }
        
        .game-card-sidebar:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: #14B8A6;
        }
        
        .game-card-sidebar img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 12px 0 0 0;
            position: absolute;
            top: 0;
            left: 0;
            flex-shrink: 0;
        }
        
        .game-card-sidebar .game-info {
            margin-left: 110px;
            height: calc(100% - 2rem);
            position: relative;
            padding: 1rem 1rem 1rem 0;
            display: flex;
            flex-direction: column;
        }
        
        .game-card-sidebar h3 {
            font-size: 1rem;
            line-height: 1.5rem;
            margin-bottom: 0.5rem;
            color: #1f2937;
            font-weight: 600;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .game-card-sidebar .game-description {
            font-size: 0.875rem;
            color: #6b7280;
            line-height: 1.25rem;
            margin-bottom: 0.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 1;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .game-card-sidebar .rating-mini {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .game-card-sidebar .stars-mini {
            color: #fbbf24;
            font-size: 0.875rem;
        }
        
        .game-card-sidebar .rating-score-mini {
            font-weight: 600;
            color: #374151;
            font-size: 0.875rem;
        }
        
        .game-card-sidebar .rating-tags-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: auto;
        }
        
        .game-card-sidebar .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .game-card-sidebar .category-pill-mini {
            font-size: 0.75rem;
            font-weight: 500;
            font-family: Arial, sans-serif;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            white-space: nowrap;
            text-align: center;
            background: linear-gradient(135deg, #bfdbfe, #e0f2fe);
            color: #1e40af;
            border: none;
            box-shadow: 0 2px 4px rgba(30, 64, 175, 0.1);
            transition: all 0.3s ease;
        }
        
        .game-card-sidebar .category-pill-mini:hover {
            background: linear-gradient(135deg, #93c5fd, #bfdbfe);
            color: #1d4ed8;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(30, 64, 175, 0.2);
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .game-card-recommendation {
                width: 160px;
            }
            .game-card-recommendation img {
                width: 160px;
                height: 143px;
            }
            .game-card-horizontal {
                width: 160px;
                flex: 0 0 160px;
            }
            .game-card-horizontal img {
                width: 160px;
                height: 143px;
            }
            .game-card-sidebar .category-tags {
                justify-content: flex-start;
            }
        }
    </style>
    <link rel="stylesheet" href="../../../assets/css/game-detail-common.css">
</head>
<body class="bg-light text-dark no-select">
    <main class="flex-1 p-8">
        <!-- Hero Section -->
        <div class="bg-gradient-to-r from-primary to-secondary py-12 rounded-xl mb-8">
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-white mb-4" data-i18n="duck-life-adventure.heroTitle">Duck Life Adventure</h1>
                <p class="text-xl text-white/90 max-w-3xl mx-auto" data-i18n="duck-life-adventure.heroDescription">è®©ä½ çš„è½¬åŸºå› é¸­å­å¼€å§‹æ–°çš„å†’é™©å§ï¼</p>
            </div>
        </div>

        <!-- Game Body -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Game Main Area -->
            <div class="lg:col-span-2">
                <!-- Game Window -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8 anti-crawl">
                    <div class="aspect-w-16 aspect-h-9 relative">
                        <iframe id="gameFrame" src="https://cloud.onlinegames.io/games/2024/wix/duck-life-adventure/index.html" class="w-full h-[600px] md:h-[700px]" frameborder="0" scrolling="no" style="overflow: hidden;" allowfullscreen></iframe>
                        <div class="absolute top-4 right-4 flex space-x-2 z-10">
                            <button id="reloadBtn" class="bg-white/90 hover:bg-white text-gray-700 p-2 rounded-lg shadow-lg" data-i18n="duck-life-adventure.reloadTooltip" title="é‡æ–°åŠ è½½æ¸¸æˆ"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg></button>
                            <button id="fullscreenBtn" class="bg-white/90 hover:bg-white text-gray-700 p-2 rounded-lg shadow-lg" data-i18n="duck-life-adventure.fullscreenTooltip" title="å…¨å±æ¸¸æˆ"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path></svg></button>
                        </div>
                        <button id="exitFullscreenBtn" class="hidden fixed top-4 right-4 bg-red-500 text-white p-3 rounded-full shadow-lg z-50" data-i18n="duck-life-adventure.exitFullscreenTooltip" title="é€€å‡ºå…¨å±"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                    </div>
                </div>

                <!-- Game Description -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4" data-i18n="duck-life-adventure.gameDescriptionTitle">æ¸¸æˆè¯´æ˜</h2>
                    <p class="text-gray-600 mb-6" data-i18n="duck-life-adventure.gameDescription"></p>
                </div>

                <!-- Related Games - ç´§è·Ÿæ¸¸æˆè¯´æ˜ -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6 relative">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6" data-i18n="common.relatedGames">ç›¸å…³æ¸¸æˆ</h2>
                    <!-- æ°´å¹³æ»šåŠ¨å®¹å™¨ -->
                    <div class="overflow-x-auto pb-4 mb-4">
                        <div id="relatedGamesContainer" class="flex gap-4 min-w-max">
                            <!-- Related games will be populated by JavaScript -->
                        </div>
                    </div>
                    <!-- æŸ¥çœ‹æ›´å¤šæ¸¸æˆæŒ‰é’® - å³ä¸‹è§’ä½ç½® -->
                    <div class="flex justify-end">
                        <a href="../../../main.html" class="group inline-flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-2.5 px-5 rounded-lg text-sm font-medium transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 text-decoration-none">
                            <span data-i18n="common.viewMoreGames">æŸ¥çœ‹æ›´å¤šæ¸¸æˆ</span>
                            <svg class="w-4 h-4 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <!-- Game Info -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <div class="flex items-center mb-6">
                        <img src="../../../assets/images/games/racing/duck-life-adventure.jpg" alt="Duck Life Adventure" class="w-32 h-32 object-cover rounded-lg shadow-md" onerror="this.src='https://via.placeholder.com/128x128?text=Duck Life Adventure'">
                        <div class="ml-4">
                            <h2 class="text-xl font-bold text-gray-900" data-i18n="duck-life-adventure.gameName">Duck Life Adventure</h2>
                            <div class="flex items-center mt-2">
                                <span class="text-yellow-400">â˜…â˜…â˜…â˜…â˜†</span>
                                <span class="text-gray-600 ml-2">4.2</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2 mb-6" id="gameTagsContainer">
                        <!-- æ ‡ç­¾å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆï¼Œæ”¯æŒå›½é™…åŒ– -->
                    </div>
                    <div class="text-sm text-gray-500">
                        <p data-i18n="duck-life-adventure.developer"></p>
                        <p data-i18n="duck-life-adventure.updateDate">2025å¹´6æœˆ1æ—¥</p>
                    </div>
                </div>

                <!-- How To Play -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-4" data-i18n="duck-life-adventure.howToPlayTitle">ç©æ³•è¯´æ˜</h2>
                    <div class="text-gray-600" data-i18n="duck-life-adventure.howToPlay">è®­ç»ƒä½ çš„å°é¸­å­çš„å„ç§èƒ½åŠ›ï¼Œå‚åŠ æ¯”èµ›èµ¢å–å¥–é‡‘ã€‚ä½¿ç”¨å¥–é‡‘è´­ä¹°é£Ÿç‰©æå‡èƒ½åŠ›ï¼Œè§£é”æ–°çš„æ¯”èµ›å’ŒåŒºåŸŸã€‚</div>
                </div>

                <!-- Controls -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-4" data-i18n="duck-life-adventure.controlsTitle">æ“ä½œè¯´æ˜</h2>
                    <ul class="controls-list text-gray-600" id="controlsList"><li>æ–¹å‘é”®æ§åˆ¶å°é¸­å­ç§»åŠ¨ï¼Œç©ºæ ¼é”®è·³è·ƒï¼Œç‰¹æ®ŠæŠ€èƒ½æ ¹æ®æ¸¸æˆæç¤ºä½¿ç”¨ã€‚</li></ul>
                </div>

                <!-- Recommended Games - æ”¾åœ¨æ“ä½œè¯´æ˜ä¸‹é¢ -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold text-gray-900" data-i18n="common.recommendedGames">æ¨èæ¸¸æˆ</h2>
                        <button id="refreshRecommendations" class="flex items-center gap-2 text-blue-500 hover:text-blue-600 text-sm font-medium transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            <span data-i18n="common.refreshRecommendations">æ¢ä¸€æ‰¹</span>
                        </button>
                    </div>
                    <div id="recommendedGamesContainer">
                        <!-- Recommended games will be populated by JavaScript -->
                    </div>
                    <div class="mt-6">
                        <a href="../../../main.html" class="block w-full bg-gradient-to-r from-teal-500 to-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:from-teal-600 hover:to-purple-700 transition-all duration-300 flex items-center justify-center gap-2 text-decoration-none">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                            </svg>
                            <span data-i18n="common.viewAllGames">æŸ¥çœ‹å…¨éƒ¨æ¸¸æˆ</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- I18n Script -->
    <script>
        // I18N Key - MUST match the key in js/language.js
        const I18N_KEY = 'xgame_lang';

        // æ ‡ç­¾ç¿»è¯‘æ˜ å°„ï¼ˆé€šç”¨æ ‡ç­¾è¯å…¸ï¼‰
        window.tagTranslations = {"1 Player": {"en": "1 Player", "cn": "å•äºº"}, "2D": {"en": "2D", "cn": "2D"}, "2 Player": {"en": "2 Player", "cn": "åŒäºº"}, "3D": {"en": "3D", "cn": "3D"}, "Action": {"en": "Action", "cn": "åŠ¨ä½œ"}, "Adventure": {"en": "Adventure", "cn": "å†’é™©"}, "Arcade": {"en": "Arcade", "cn": "è¡—æœº"}, "Armor": {"en": "Armor", "cn": "è£…ç”²"}, "Army": {"en": "Army", "cn": "å†›é˜Ÿ"}, "Avoid": {"en": "Avoid", "cn": "èº²é¿"}, "Battle": {"en": "Battle", "cn": "æˆ˜æ–—"}, "Car": {"en": "Car", "cn": "æ±½è½¦"}, "Clicker": {"en": "Clicker", "cn": "ç‚¹å‡»"}, "Combat": {"en": "Combat", "cn": "æ ¼æ–—"}, "Crazy": {"en": "Crazy", "cn": "ç–¯ç‹‚"}, "Driving": {"en": "Driving", "cn": "é©¾é©¶"}, "Embeddable": {"en": "Embeddable", "cn": "å¯åµŒå…¥"}, "Fantasy": {"en": "Fantasy", "cn": "å¥‡å¹»"}, "Free": {"en": "Free", "cn": "å…è´¹"}, "Girl": {"en": "Girl", "cn": "å¥³å­©"}, "Girls": {"en": "Girls", "cn": "å¥³å­©ä»¬"}, "Horror": {"en": "Horror", "cn": "ææ€–"}, "IO Games": {"en": "IO Games", "cn": "IOæ¸¸æˆ"}, "Kids": {"en": "Kids", "cn": "å„¿ç«¥"}, "Minecraft": {"en": "Minecraft", "cn": "æˆ‘çš„ä¸–ç•Œ"}, "Mobile": {"en": "Mobile", "cn": "æ‰‹æœº"}, "Multiplayer": {"en": "Multiplayer", "cn": "å¤šäºº"}, "New Games": {"en": "New Games", "cn": "æ–°æ¸¸æˆ"}, "Pixel": {"en": "Pixel", "cn": "åƒç´ "}, "Puzzle": {"en": "Puzzle", "cn": "ç›Šæ™º"}, "Racing": {"en": "Racing", "cn": "èµ›è½¦"}, "RPG": {"en": "RPG", "cn": "è§’è‰²æ‰®æ¼”"}, "Shooting": {"en": "Shooting", "cn": "å°„å‡»"}, "Simulator": {"en": "Simulator", "cn": "æ¨¡æ‹Ÿ"}, "Sniper": {"en": "Sniper", "cn": "ç‹™å‡»"}, "Sports": {"en": "Sports", "cn": "ä½“è‚²"}, "Strategy": {"en": "Strategy", "cn": "ç­–ç•¥"}, "Survival": {"en": "Survival", "cn": "ç”Ÿå­˜"}, "Tank": {"en": "Tank", "cn": "å¦å…‹"}, "Unity": {"en": "Unity", "cn": "Unity"}, "War": {"en": "War", "cn": "æˆ˜äº‰"}, "Weapon": {"en": "Weapon", "cn": "æ­¦å™¨"}};

        // æ¸¸æˆæ ‡ç­¾æ•°æ®ï¼ˆä»æ¸¸æˆæ•°æ®ä¸­æå–ï¼‰
        window.gameTags = ["Racing"];

        // å°†ç¿»è¯‘å¯¹è±¡è®¾ç½®ä¸ºå…¨å±€å˜é‡ï¼Œä¾› game-detail-common.js ä½¿ç”¨
        window.translations = {
            en: {
                "common": {
                    "relatedGames": "Related Games",
                    "recommendedGames": "Recommended Games",
                    "playNow": "Play Now",
                    "refreshRecommendations": "Refresh",
                    "viewAllGames": "View All Games",
                    "viewMoreGames": "View More Games"
                },
                "duck-life-adventure": {"title": "Duck Life Adventure", "description": "Let your genetically modified duck embark on a new adventure!", "categories": ["Racing"], "developer": "", "controls": "Use the arrow keys to control the movement of the duckling, use the space bar to jump, and use special skills according to game prompts.", "howToPlay": "Train your duckling's various abilities and participate in competitions to win prizes. Use bonuses to purchase food to enhance abilities, unlock new competitions and regions. ", "powerUps": "", "soloCampaign": "", "gameDescriptionTitle": "Game Description", "gameDescription": "Train your duckling's various abilities and participate in competitions to win prizes. Use bonuses to purchase food to enhance abilities, unlock new competitions and regions. ", "gameName": "Duck Life Adventure", "updateDate": "Updated: June 1, 2025", "controlsTitle": "Controls", "howToPlayTitle": "How To Play", "powerUpsTitle": "Power-Ups", "soloCampaignTitle": "Solo Campaign", "relatedGamesTitle": "Related Games", "reloadTooltip": "Reload Game", "fullscreenTooltip": "Fullscreen Game", "exitFullscreenTooltip": "Exit Fullscreen", "controlsListHtml": "<li>Use the arrow keys to control the movement of the duckling, use the space bar to jump, and use special skills according to game prompts.</li>", "heroTitle": "Duck Life Adventure", "heroDescription": "Let your genetically modified duck embark on a new adventure!", "control1": "Use the arrow keys to control the movement of the duckling, use the space bar to jump, and use special skills according to game prompts."},
                "sidebar": { "racing": "Racing" },
                "controlsListHtml": "<li>Use the arrow keys to control the movement of the duckling, use the space bar to jump, and use special skills according to game prompts.</li>"
            },
            cn: {
                "common": {
                    "relatedGames": "ç›¸å…³æ¸¸æˆ",
                    "recommendedGames": "æ¨èæ¸¸æˆ", 
                    "playNow": "ç«‹å³æ¸¸æˆ",
                    "refreshRecommendations": "æ¢ä¸€æ‰¹",
                    "viewAllGames": "æŸ¥çœ‹å…¨éƒ¨æ¸¸æˆ",
                    "viewMoreGames": "æŸ¥çœ‹æ›´å¤šæ¸¸æˆ"
                },
                "duck-life-adventure": {"title": "é¸­å­ç”Ÿæ´»å†’é™©", "description": "è®©ä½ çš„è½¬åŸºå› é¸­å­å¼€å§‹æ–°çš„å†’é™©å§ï¼", "categories": ["Racing"], "developer": "", "controls": "æ–¹å‘é”®æ§åˆ¶å°é¸­å­ç§»åŠ¨ï¼Œç©ºæ ¼é”®è·³è·ƒï¼Œç‰¹æ®ŠæŠ€èƒ½æ ¹æ®æ¸¸æˆæç¤ºä½¿ç”¨ã€‚", "howToPlay": "è®­ç»ƒä½ çš„å°é¸­å­çš„å„ç§èƒ½åŠ›ï¼Œå‚åŠ æ¯”èµ›èµ¢å–å¥–é‡‘ã€‚ä½¿ç”¨å¥–é‡‘è´­ä¹°é£Ÿç‰©æå‡èƒ½åŠ›ï¼Œè§£é”æ–°çš„æ¯”èµ›å’ŒåŒºåŸŸã€‚", "powerUps": "", "soloCampaign": "", "gameDescriptionTitle": "æ¸¸æˆè¯´æ˜", "gameDescription": "è®­ç»ƒä½ çš„å°é¸­å­çš„å„ç§èƒ½åŠ›ï¼Œå‚åŠ æ¯”èµ›èµ¢å–å¥–é‡‘ã€‚ä½¿ç”¨å¥–é‡‘è´­ä¹°é£Ÿç‰©æå‡èƒ½åŠ›ï¼Œè§£é”æ–°çš„æ¯”èµ›å’ŒåŒºåŸŸã€‚", "gameName": "é¸­å­ç”Ÿæ´»å†’é™©", "updateDate": "æ›´æ–°äº: 2025å¹´6æœˆ1æ—¥", "controlsTitle": "æ“ä½œè¯´æ˜", "howToPlayTitle": "ç©æ³•è¯´æ˜", "powerUpsTitle": "é“å…·è¯´æ˜", "soloCampaignTitle": "å•äººæ¨¡å¼", "relatedGamesTitle": "ç›¸å…³æ¸¸æˆ", "reloadTooltip": "é‡æ–°åŠ è½½æ¸¸æˆ", "fullscreenTooltip": "å…¨å±æ¸¸æˆ", "exitFullscreenTooltip": "é€€å‡ºå…¨å±", "controlsListHtml": "<li>æ–¹å‘é”®æ§åˆ¶å°é¸­å­ç§»åŠ¨ï¼Œç©ºæ ¼é”®è·³è·ƒï¼Œç‰¹æ®ŠæŠ€èƒ½æ ¹æ®æ¸¸æˆæç¤ºä½¿ç”¨ã€‚</li>", "heroTitle": "é¸­å­ç”Ÿæ´»å†’é™©", "heroDescription": "è®©ä½ çš„è½¬åŸºå› é¸­å­å¼€å§‹æ–°çš„å†’é™©å§ï¼", "control1": "æ–¹å‘é”®æ§åˆ¶å°é¸­å­ç§»åŠ¨ï¼Œç©ºæ ¼é”®è·³è·ƒï¼Œç‰¹æ®ŠæŠ€èƒ½æ ¹æ®æ¸¸æˆæç¤ºä½¿ç”¨ã€‚"},
                "sidebar": { "racing": "ç«é€Ÿ" },
                "controlsListHtml": "<li>æ–¹å‘é”®æ§åˆ¶å°é¸­å­ç§»åŠ¨ï¼Œç©ºæ ¼é”®è·³è·ƒï¼Œç‰¹æ®ŠæŠ€èƒ½æ ¹æ®æ¸¸æˆæç¤ºä½¿ç”¨ã€‚</li>"
            }
        };
        
        /**
         * æ¸²æŸ“æ¸¸æˆæ ‡ç­¾ï¼ˆæ”¯æŒå›½é™…åŒ–ï¼‰
         * @param {string} lang - è¯­è¨€ä»£ç  ('en' æˆ– 'cn')
         */
        function renderGameTags(lang) {
            const container = document.getElementById('gameTagsContainer');
            if (!container || !window.gameTags || !window.tagTranslations) {
                console.warn('âš ï¸ æ ‡ç­¾å®¹å™¨æˆ–ç¿»è¯‘æ•°æ®æœªæ‰¾åˆ°');
                return;
            }

            // æ¸…ç©ºå®¹å™¨
            container.innerHTML = '';

            // éå†æ ‡ç­¾å¹¶æ¸²æŸ“
            window.gameTags.forEach(tagKey => {
                const tagTranslation = window.tagTranslations[tagKey];
                if (tagTranslation) {
                    const tagText = tagTranslation[lang] || tagTranslation['en'] || tagKey;
                    
                    // åˆ›å»ºæ ‡ç­¾å…ƒç´ 
                    const tagElement = document.createElement('span');
                    tagElement.className = 'px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm mr-1';
                    tagElement.textContent = tagText;
                    tagElement.setAttribute('data-tag-key', tagKey); // æ–¹ä¾¿è°ƒè¯•
                    
                    container.appendChild(tagElement);
                }
            });

            console.log(`âœ… å·²æ¸²æŸ“ ${window.gameTags.length} ä¸ªæ ‡ç­¾ (è¯­è¨€: ${lang})`);
        }

        /**
         * åº”ç”¨ç¿»è¯‘åˆ°é¡µé¢
         * @param {string} lang - è¯­è¨€ä»£ç  ('en' æˆ– 'cn')
         */
        function applyTranslations(lang) {
            if (!lang || !window.translations) {
                return;
            }

            const targetLangData = window.translations[lang];
            const fallbackLang = lang === 'en' ? 'cn' : 'en';
            const fallbackLangData = window.translations[fallbackLang];

            if (!targetLangData) {
                return;
            }

            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                
                const findTranslation = (data, k) => k.split('.').reduce((obj, i) => obj?.[i], data);

                // 1. Try target language. An empty string is not a valid translation.
                let translation = findTranslation(targetLangData, key);

                // 2. If not found or empty, try fallback language
                if (!translation && fallbackLangData) {
                    translation = findTranslation(fallbackLangData, key);
                }

                if (translation) {
                    // For buttons with SVG, only update the 'title'
                    if (element.tagName === 'BUTTON' && element.querySelector('svg')) {
                        element.setAttribute('title', translation);
                    } else {
                        // For other elements, safely update text content
                        const textNode = Array.from(element.childNodes).find(node => node.nodeType === Node.TEXT_NODE && node.textContent.trim());
                        if (textNode) {
                            textNode.textContent = translation;
                        } else {
                            element.textContent = translation;
                        }
                    }
                }
            });

            // Update document's lang attribute
            document.documentElement.lang = lang === 'cn' ? 'zh-CN' : 'en';

            // Controls åˆ—è¡¨ç‰¹æ®Šå¤„ç†
            const controlsList = document.getElementById('controlsList');
            if (controlsList && window.translations && window.translations[lang] && window.translations[lang]["duck-life-adventure"] && window.translations[lang]["duck-life-adventure"].controlsListHtml) {
                controlsList.innerHTML = window.translations[lang]["duck-life-adventure"].controlsListHtml;
            }

            // æ¸²æŸ“å›½é™…åŒ–æ ‡ç­¾
            renderGameTags(lang);
        }

        /**
         * åŒæ­¥è¯­è¨€è®¾ç½®
         */
        function syncLanguage() {
            const currentLang = localStorage.getItem(I18N_KEY) || 'en';
            applyTranslations(currentLang);
            // é‡æ–°æ¸²æŸ“æ¸¸æˆæ¨èä»¥æ”¯æŒå›½é™…åŒ–
            renderGameRecommendations(currentLang);
            renderGameTags(currentLang);
            console.log(`ğŸŒ è¯­è¨€åŒæ­¥å®Œæˆï¼Œå½“å‰è¯­è¨€: ${currentLang}`);
        }

        // ç›‘å¬æ¥è‡ªçˆ¶é¡µé¢çš„æ¶ˆæ¯
        window.addEventListener('message', function(event) {
            if (event.data.type === 'languageChange' && event.data.lang) {
                // å¤„ç†æ¥è‡ªçˆ¶é¡µé¢çš„è¯­è¨€å˜æ›´æ¶ˆæ¯
                applyTranslations(event.data.lang);
                // é‡æ–°æ¸²æŸ“æ¸¸æˆæ¨èä»¥æ”¯æŒå›½é™…åŒ–
                renderGameRecommendations(event.data.lang);
                renderGameTags(event.data.lang);
                console.log(`ğŸŒ æ”¶åˆ°è¯­è¨€åˆ‡æ¢æ¶ˆæ¯ï¼Œå·²åˆ‡æ¢åˆ°: ${event.data.lang}`);
            } else if (event.data.type === 'scrollToSection') {
                // æ¸¸æˆè¯¦æƒ…é¡µæ— æ³•å¤„ç†æ»šåŠ¨è¯·æ±‚ï¼Œä¸å‘é€ç¡®è®¤æ¶ˆæ¯
                // çˆ¶é¡µé¢ä¼šå› ä¸ºæ²¡æ”¶åˆ°ç¡®è®¤è€Œé‡æ–°åŠ è½½main.html
                console.log('âš ï¸ æ¸¸æˆè¯¦æƒ…é¡µæ”¶åˆ°æ»šåŠ¨è¯·æ±‚ï¼Œä½†æ— æ³•å¤„ç†:', event.data.sectionId);
            }
        });

        // ç›‘å¬ localStorage å˜åŒ–ï¼ˆä¸»è¦åŒæ­¥æ–¹å¼ï¼‰
        window.addEventListener('storage', (event) => {
            if (event.key === I18N_KEY && event.newValue) {
                applyTranslations(event.newValue);
                // é‡æ–°æ¸²æŸ“æ¸¸æˆæ¨èä»¥æ”¯æŒå›½é™…åŒ–
                renderGameRecommendations(event.newValue);
                renderGameTags(event.newValue);
                console.log(`ğŸŒ æ£€æµ‹åˆ°è¯­è¨€å˜åŒ–ï¼Œå·²åˆ‡æ¢åˆ°: ${event.newValue}`);
            }
        });

        // ========== æ¸¸æˆæ¨èåŠŸèƒ½ ==========

        // æ¸¸æˆæ•°æ®åº“ï¼ˆåŠ¨æ€ç”Ÿæˆï¼‰
        const gameDatabase = {"monster-survivors": {"title": {"en": "Monster Survivors", "cn": "Monster Survivors"}, "description": {"en": "Survive endless waves of monsters", "cn": "åœ¨æ— å°½çš„æ€ªç‰©æµªæ½®ä¸­ç”Ÿå­˜ä¸‹æ¥"}, "image": "assets/images/games/action/monster-survivors.jpg", "url": "games/categories/action/monster-survivors.html", "tags": ["Action", "Survival", "RPG"], "rating": 4.5, "category": "action"}, "crazy-shooters": {"title": {"en": "Crazy Shooters", "cn": "Crazy Shooters"}, "description": {"en": "Crazy shooting game", "cn": "ç–¯ç‹‚å°„å‡»æ¸¸æˆ"}, "image": "assets/images/games/action/crazy-shooters.jpg", "url": "games/categories/action/crazy-shooters.html", "tags": ["Action", "Shooting"], "rating": 4.3, "category": "action"}, "stickman-parkour": {"title": {"en": "Stickman Parkour", "cn": "ç«æŸ´äººè·‘é…·"}, "description": {"en": "Stickman parkour game", "cn": "ç«æŸ´äººè·‘é…·æ¸¸æˆ"}, "image": "assets/images/games/adventure/stickman-parkour.jpg", "url": "games/categories/adventure/stickman-parkour.html", "tags": ["Adventure", "Platform"], "rating": 4.2, "category": "adventure"}, "vex-7": {"title": {"en": "Vex 7", "cn": "Vex 7"}, "description": {"en": "Challenging platform adventure", "cn": "æŒ‘æˆ˜é‡é‡çš„å¹³å°å†’é™©"}, "image": "assets/images/games/adventure/vex-7.jpg", "url": "games/categories/adventure/vex-7.html", "tags": ["Adventure", "Platform"], "rating": 4.5, "category": "adventure"}, "run-3d": {"title": {"en": "Run 3D", "cn": "Run 3D"}, "description": {"en": "3D parkour game", "cn": "3Dè·‘é…·æ¸¸æˆ"}, "image": "assets/images/games/arcade/run-3d.jpg", "url": "games/categories/arcade/run-3d.html", "tags": ["Arcade"], "rating": 4.1, "category": "arcade"}, "geometry-dash": {"title": {"en": "Geometry Dash", "cn": "Geometry Dash"}, "description": {"en": "Geometry dash challenge", "cn": "å‡ ä½•å†²åˆºæŒ‘æˆ˜"}, "image": "assets/images/games/arcade/geometry-dash.jpg", "url": "games/categories/arcade/geometry-dash.html", "tags": ["Arcade", "Platform"], "rating": 4.4, "category": "arcade"}, "burnout-city": {"title": {"en": "Burnout City", "cn": "ç‡ƒå°½éƒ½å¸‚"}, "description": {"en": "City driving and drifting", "cn": "åŸå¸‚é©¾é©¶ä¸æ¼‚ç§»"}, "image": "assets/images/games/car/burnout-city.jpg", "url": "games/categories/car/burnout-city.html", "tags": ["Car", "Driving"], "rating": 4.3, "category": "car"}, "fun-party-makeup": {"title": {"en": "Fun Party Makeup", "cn": "è¶£å‘³æ´¾å¯¹åŒ–å¦†"}, "description": {"en": "Fun party makeup game", "cn": "è¶£å‘³æ´¾å¯¹åŒ–å¦†æ¸¸æˆ"}, "image": "assets/images/games/girl/fun-party-makeup.jpg", "url": "games/categories/girl/fun-party-makeup.html", "tags": ["Girl", "Makeup"], "rating": 4.0, "category": "girl"}, "poptropica": {"title": {"en": "Poptropica", "cn": "Poptropica"}, "description": {"en": "Virtual world adventure", "cn": "è™šæ‹Ÿä¸–ç•Œå†’é™©"}, "image": "assets/images/games/kids/poptropica.jpg", "url": "games/categories/kids/poptropica.html", "tags": ["Kids", "Adventure"], "rating": 4.2, "category": "kids"}, "world-guesser": {"title": {"en": "World Guesser", "cn": "ä¸–ç•ŒçŒœè°œè€…"}, "description": {"en": "Geography guessing game", "cn": "çŒœåœ°ç†ä½ç½®æ¸¸æˆ"}, "image": "assets/images/games/multiplayer/world-guesser.jpg", "url": "games/categories/multiplayer/world-guesser.html", "tags": ["Multiplayer", "Puzzle"], "rating": 4.1, "category": "multiplayer"}, "google-feud": {"title": {"en": "Google Feud", "cn": "è°·æ­Œé—®ç­”"}, "description": {"en": "Guess Google search results", "cn": "çŒœè°·æ­Œæœç´¢ç»“æœ"}, "image": "assets/images/games/puzzle/google-feud.jpg", "url": "games/categories/puzzle/google-feud.html", "tags": ["Puzzle", "Trivia"], "rating": 4.3, "category": "puzzle"}, "duck-life-adventure": {"title": {"en": "Duck Life Adventure", "cn": "å°é¸­å­å†’é™©"}, "description": {"en": "Duck racing adventure", "cn": "å°é¸­å­ç«é€Ÿå†’é™©"}, "image": "assets/images/games/racing/duck-life-adventure.jpg", "url": "games/categories/racing/duck-life-adventure.html", "tags": ["Racing", "Adventure"], "rating": 4.2, "category": "racing"}, "alien-sky-invasion": {"title": {"en": "Alien Sky Invasion", "cn": "å¤–æ˜Ÿäººå…¥ä¾µ"}, "description": {"en": "Alien invasion air combat", "cn": "å¤–æ˜Ÿäººå…¥ä¾µç©ºæˆ˜"}, "image": "assets/images/games/shooting/alien-sky-invasion.jpg", "url": "games/categories/shooting/alien-sky-invasion.html", "tags": ["Shooting", "Air Combat"], "rating": 4.1, "category": "shooting"}, "hoop-world-3d": {"title": {"en": "Hoop World 3D", "cn": "ç¯®çƒä¸–ç•Œ3D"}, "description": {"en": "3D basketball game", "cn": "3Dç¯®çƒæ¸¸æˆ"}, "image": "assets/images/games/sports/hoop-world-3d.jpg", "url": "games/categories/sports/hoop-world-3d.html", "tags": ["Sports", "3D"], "rating": 4.0, "category": "sports"}, "hero-tower": {"title": {"en": "Hero Tower", "cn": "è‹±é›„å¡”"}, "description": {"en": "Hero tower defense strategy", "cn": "è‹±é›„å¡”é˜²ç­–ç•¥"}, "image": "assets/images/games/strategy/hero-tower.jpg", "url": "games/categories/strategy/hero-tower.html", "tags": ["Strategy", "Tower Defense"], "rating": 4.3, "category": "strategy"}};

        /**
         * è·å–ç›¸å…³æ¸¸æˆï¼ˆåŸºäºæ ‡ç­¾åŒ¹é…ï¼‰
         * @param {string} currentGameId - å½“å‰æ¸¸æˆID
         * @param {number} count - è¿”å›æ¸¸æˆæ•°é‡
         * @returns {Array} ç›¸å…³æ¸¸æˆåˆ—è¡¨
         */
        function getRelatedGames(currentGameId, count = 5) {
            const currentGame = gameDatabase[currentGameId];
            if (!currentGame) return [];

            const currentTags = currentGame.tags;
            const otherGames = Object.entries(gameDatabase).filter(([id]) => id !== currentGameId);
            
            // è®¡ç®—æ ‡ç­¾åŒ¹é…åº¦å¹¶æ’åº
            const gamesWithScore = otherGames.map(([id, game]) => {
                const matchingTags = game.tags.filter(tag => currentTags.includes(tag));
                return {
                    id,
                    game,
                    score: matchingTags.length,
                    matchingTags
                };
            });

            // æŒ‰åŒ¹é…åº¦æ’åºï¼ŒåŒ¹é…åº¦ç›¸åŒçš„æŒ‰è¯„åˆ†æ’åº
            gamesWithScore.sort((a, b) => {
                if (a.score !== b.score) return b.score - a.score;
                return b.game.rating - a.game.rating;
            });

            return gamesWithScore.slice(0, count).map(item => ({
                id: item.id,
                ...item.game,
                matchingTags: item.matchingTags
            }));
        }

        /**
         * è·å–æ¨èæ¸¸æˆï¼ˆéšæœºæ¨èï¼‰
         * @param {string} currentGameId - å½“å‰æ¸¸æˆID
         * @param {Array} excludeIds - è¦æ’é™¤çš„æ¸¸æˆIDåˆ—è¡¨
         * @param {number} count - è¿”å›æ¸¸æˆæ•°é‡
         * @returns {Array} æ¨èæ¸¸æˆåˆ—è¡¨
         */
        function getRecommendedGames(currentGameId, excludeIds = [], count = 4) {
            const allExcludeIds = [currentGameId, ...excludeIds];
            const availableGames = Object.entries(gameDatabase)
                .filter(([id]) => !allExcludeIds.includes(id))
                .map(([id, game]) => ({ id, ...game }));

            // éšæœºæ‰“ä¹±æ•°ç»„
            for (let i = availableGames.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [availableGames[i], availableGames[j]] = [availableGames[j], availableGames[i]];
            }

            return availableGames.slice(0, count);
        }

        /**
         * æ¸²æŸ“æ¸¸æˆå¡ç‰‡ï¼ˆå®Œå…¨åŒ¹é…main.htmlé£æ ¼ï¼‰
         * @param {Object} game - æ¸¸æˆå¯¹è±¡
         * @param {string} lang - å½“å‰è¯­è¨€
         * @param {boolean} isSidebar - æ˜¯å¦ä¸ºä¾§è¾¹æ æ ·å¼
         * @param {boolean} isHorizontal - æ˜¯å¦ä¸ºæ°´å¹³å¸ƒå±€
         * @returns {string} HTMLå­—ç¬¦ä¸²
         */
        function renderGameCard(game, lang = 'cn', isSidebar = false, isHorizontal = false) {
            const title = game.title[lang] || game.title.en || game.title.cn;
            const description = game.description[lang] || game.description.en || game.description.cn;
            
            // ç”Ÿæˆæ˜Ÿçº§è¯„åˆ†
            const fullStars = Math.floor(game.rating);
            const totalStars = 5;
            let starsHtml = '';
            for (let i = 0; i < totalStars; i++) {
                starsHtml += i < fullStars ? 'â˜…' : 'â˜…';
            }

            if (isHorizontal) {
                // æ°´å¹³å¸ƒå±€æ ·å¼ - å®Œå…¨åŒ¹é…main.htmlçš„æ¸¸æˆå¡ç‰‡ç»“æ„
                const categoryTags = game.tags.slice(0, 2).map(tag => {
                    const tagTranslation = window.tagTranslations[tag];
                    const tagText = tagTranslation ? (tagTranslation[lang] || tagTranslation['en'] || tag) : tag;
                    return `<span class="horizontal-tag">${tagText}</span>`;
                }).join('');

                return `
                    <div class="game-card-horizontal">
                                    <a href="../../../${game.url}">
                <img src="../../../${game.image}" alt="${title}" onerror="this.src='https://via.placeholder.com/190x170/f8fafc/666?text=${encodeURIComponent(title.slice(0, 3))}'">
                            <div class="p-4">
                                <h3>${title}</h3>
                                <p>${description}</p>
                                <div class="rating-container">
                                    <div class="stars">${starsHtml}</div>
                                    <span class="rating-score">${game.rating}</span>
                                </div>
                                <div class="game-tags">
                                    ${categoryTags}
                                </div>
                            </div>
                        </a>
                    </div>
                `;
            } else if (isSidebar) {
                // ä¾§è¾¹æ æ ·å¼
                const categoryTags = game.tags.slice(0, 2).map(tag => {
                    return `<span class="category-pill-mini">${tag}</span>`;
                }).join('');

                return `
                    <div class="game-card-sidebar">
                                    <a href="../../../${game.url}" class="w-full h-full block">
                <img src="../../../${game.image}" alt="${title}" onerror="this.src='https://via.placeholder.com/100x100/f8fafc/666?text=${encodeURIComponent(title.slice(0, 3))}'">
                            <div class="game-info">
                                <h3>${title}</h3>
                                <p class="game-description">${description}</p>
                                <div class="rating-tags-container">
                                    <div class="rating-mini">
                                        <span class="stars-mini">${starsHtml}</span>
                                        <span class="rating-score-mini">${game.rating}</span>
                                    </div>
                                    <div class="category-tags">
                                        ${categoryTags}
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                `;
            } else {
                // æ ‡å‡†ç½‘æ ¼æ ·å¼
                return `
                    <div class="game-card-recommendation">
                                <a href="../../../${game.url}">
            <img src="../../../${game.image}" alt="${title}" onerror="this.src='https://via.placeholder.com/190x170/f8fafc/666?text=${encodeURIComponent(title)}'">
                            <div class="p-4">
                                <h3>${title}</h3>
                                <p>${description}</p>
                                <div class="rating-container">
                                    <div class="stars">${starsHtml}</div>
                                    <span class="rating-score">${game.rating}</span>
                                </div>
                                <div class="game-tags">
                                    <span class="category-pill">${game.tags[0]}</span>
                                </div>
                            </div>
                        </a>
                    </div>
                `;
            }
        }

        /**
         * æ¸²æŸ“æ¸¸æˆæ¨èåŒºåŸŸ
         * @param {string} lang - å½“å‰è¯­è¨€
         */
        function renderGameRecommendations(lang = 'cn') {
            const currentGameId = 'duck-life-adventure'; // åŠ¨æ€æ›¿æ¢ä¸ºå½“å‰æ¸¸æˆID
            
            // è·å–ç›¸å…³æ¸¸æˆï¼ˆå·¦ä¾§ä¸»è¦åŒºåŸŸï¼‰
            const relatedGames = getRelatedGames(currentGameId, 5);
            const relatedContainer = document.getElementById('relatedGamesContainer');
            
            if (relatedContainer) {
                if (relatedGames.length > 0) {
                    relatedContainer.innerHTML = relatedGames
                        .map(game => renderGameCard(game, lang, false, true)) // ä½¿ç”¨æ°´å¹³å¸ƒå±€æ ·å¼
                        .join('');
                } else {
                    relatedContainer.innerHTML = `
                        <div class="text-center text-gray-500 py-8 min-w-full">
                            ${lang === 'en' ? 'No related games found' : 'æš‚æ— ç›¸å…³æ¸¸æˆ'}
                        </div>
                    `;
                }
            }
            
            // è·å–æ¨èæ¸¸æˆï¼ˆå³ä¾§è¾¹æ ï¼‰
            const relatedGameIds = relatedGames.map(game => game.id);
            const recommendedGames = getRecommendedGames(currentGameId, relatedGameIds, 4);
            const recommendedContainer = document.getElementById('recommendedGamesContainer');
            
            if (recommendedContainer) {
                if (recommendedGames.length > 0) {
                    recommendedContainer.innerHTML = recommendedGames
                        .map(game => renderGameCard(game, lang, true)) // ä½¿ç”¨ä¾§è¾¹æ æ ·å¼
                        .join('');
                } else {
                    recommendedContainer.innerHTML = `
                        <div class="text-center text-gray-500 py-4">
                            ${lang === 'en' ? 'No recommended games found' : 'æš‚æ— æ¨èæ¸¸æˆ'}
                        </div>
                    `;
                }
            }

            console.log(`âœ… æ¸¸æˆæ¨èæ¸²æŸ“å®Œæˆ - ç›¸å…³æ¸¸æˆ: ${relatedGames.length}, æ¨èæ¸¸æˆ: ${recommendedGames.length}`);
        }

        /**
         * åˆ·æ–°æ¨èæ¸¸æˆ
         * @param {string} lang - å½“å‰è¯­è¨€
         */
        function refreshRecommendations(lang = 'cn') {
            const currentGameId = 'duck-life-adventure';
            const relatedGames = getRelatedGames(currentGameId, 5);
            const relatedGameIds = relatedGames.map(game => game.id);
            
            // é‡æ–°éšæœºè·å–æ¨èæ¸¸æˆ
            const newRecommendedGames = getRecommendedGames(currentGameId, relatedGameIds, 4);
            const recommendedContainer = document.getElementById('recommendedGamesContainer');
            
            if (recommendedContainer && newRecommendedGames.length > 0) {
                // æ·»åŠ åˆ·æ–°åŠ¨ç”»æ•ˆæœ
                recommendedContainer.style.opacity = '0.5';
                recommendedContainer.style.transform = 'translateY(10px)';
                
                setTimeout(() => {
                    recommendedContainer.innerHTML = newRecommendedGames
                        .map(game => renderGameCard(game, lang, true))
                        .join('');
                    recommendedContainer.style.opacity = '1';
                    recommendedContainer.style.transform = 'translateY(0)';
                }, 300);
            }
            
            console.log(`ğŸ”„ æ¨èæ¸¸æˆå·²åˆ·æ–° - æ–°æ¨è: ${newRecommendedGames.length}`);
        }

        // ========== æŒ‰é’®åŠŸèƒ½å®ç° ==========
        
        // é‡è½½æ¸¸æˆåŠŸèƒ½
        function reloadGame() {
            console.log('ğŸ”„ é‡è½½æ¸¸æˆæŒ‰é’®è¢«ç‚¹å‡»');
            const gameFrame = document.getElementById('gameFrame');
            if (gameFrame) {
                const currentSrc = gameFrame.src;
                console.log('ğŸ“ å½“å‰æ¸¸æˆURL:', currentSrc);
                gameFrame.src = '';
                setTimeout(() => {
                    gameFrame.src = currentSrc;
                    console.log('âœ… æ¸¸æˆé‡è½½å®Œæˆ');
                }, 100);
            } else {
                console.error('âŒ æœªæ‰¾åˆ°æ¸¸æˆiframe');
            }
        }

        // å…¨å±åŠŸèƒ½
        function toggleFullscreen() {
            console.log('ğŸ–¥ï¸ å…¨å±æŒ‰é’®è¢«ç‚¹å‡»');
            const gameFrame = document.getElementById('gameFrame');
            const exitBtn = document.getElementById('exitFullscreenBtn');
            
            if (gameFrame) {
                try {
                    if (gameFrame.requestFullscreen) {
                        gameFrame.requestFullscreen();
                    } else if (gameFrame.mozRequestFullScreen) { /* Firefox */
                        gameFrame.mozRequestFullScreen();
                    } else if (gameFrame.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
                        gameFrame.webkitRequestFullscreen();
                    } else if (gameFrame.msRequestFullscreen) { /* IE/Edge */
                        gameFrame.msRequestFullscreen();
                    }
                    
                    if (exitBtn) {
                        exitBtn.classList.remove('hidden');
                        console.log('ğŸ‘ï¸ é€€å‡ºå…¨å±æŒ‰é’®å·²æ˜¾ç¤º');
                    }
                    console.log('âœ… å…¨å±æ¨¡å¼å·²æ¿€æ´»');
                } catch (error) {
                    console.error('âŒ å…¨å±æ¨¡å¼æ¿€æ´»å¤±è´¥:', error);
                }
            } else {
                console.error('âŒ æœªæ‰¾åˆ°æ¸¸æˆiframe');
            }
        }

        // é€€å‡ºå…¨å±åŠŸèƒ½
        function exitFullscreen() {
            console.log('ğŸšª é€€å‡ºå…¨å±æŒ‰é’®è¢«ç‚¹å‡»');
            const exitBtn = document.getElementById('exitFullscreenBtn');
            
            try {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                    document.msExitFullscreen();
                }
                
                if (exitBtn) {
                    exitBtn.classList.add('hidden');
                    console.log('ğŸ‘ï¸ é€€å‡ºå…¨å±æŒ‰é’®å·²éšè—');
                }
                console.log('âœ… å·²é€€å‡ºå…¨å±æ¨¡å¼');
            } catch (error) {
                console.error('âŒ é€€å‡ºå…¨å±å¤±è´¥:', error);
            }
        }

        // ç»‘å®šæŒ‰é’®äº‹ä»¶
        function bindButtonEvents() {
            console.log('ğŸ”— å¼€å§‹ç»‘å®šæŒ‰é’®äº‹ä»¶');
            
            const reloadBtn = document.getElementById('reloadBtn');
            const fullscreenBtn = document.getElementById('fullscreenBtn');
            const exitFullscreenBtn = document.getElementById('exitFullscreenBtn');
            
            if (reloadBtn) {
                console.log('âœ… æ‰¾åˆ°é‡è½½æŒ‰é’®ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶');
                reloadBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    reloadGame();
                });
            } else {
                console.error('âŒ æœªæ‰¾åˆ°é‡è½½æŒ‰é’® (id: reloadBtn)');
            }
            
            if (fullscreenBtn) {
                console.log('âœ… æ‰¾åˆ°å…¨å±æŒ‰é’®ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶');
                fullscreenBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleFullscreen();
                });
            } else {
                console.error('âŒ æœªæ‰¾åˆ°å…¨å±æŒ‰é’® (id: fullscreenBtn)');
            }
            
            if (exitFullscreenBtn) {
                console.log('âœ… æ‰¾åˆ°é€€å‡ºå…¨å±æŒ‰é’®ï¼Œç»‘å®šç‚¹å‡»äº‹ä»¶');
                exitFullscreenBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    exitFullscreen();
                });
            } else {
                console.error('âŒ æœªæ‰¾åˆ°é€€å‡ºå…¨å±æŒ‰é’® (id: exitFullscreenBtn)');
            }
            
            // ç›‘å¬å…¨å±çŠ¶æ€å˜åŒ–
            document.addEventListener('fullscreenchange', () => {
                const exitBtn = document.getElementById('exitFullscreenBtn');
                if (!document.fullscreenElement && exitBtn) {
                    exitBtn.classList.add('hidden');
                    console.log('ğŸ“± æ£€æµ‹åˆ°é€€å‡ºå…¨å±ï¼Œéšè—é€€å‡ºæŒ‰é’®');
                }
            });
            
            // å…¼å®¹ä¸åŒæµè§ˆå™¨çš„å…¨å±äº‹ä»¶
            document.addEventListener('webkitfullscreenchange', () => {
                const exitBtn = document.getElementById('exitFullscreenBtn');
                if (!document.webkitFullscreenElement && exitBtn) {
                    exitBtn.classList.add('hidden');
                }
            });
            
            document.addEventListener('mozfullscreenchange', () => {
                const exitBtn = document.getElementById('exitFullscreenBtn');
                if (!document.mozFullScreenElement && exitBtn) {
                    exitBtn.classList.add('hidden');
                }
            });
            
            document.addEventListener('MSFullscreenChange', () => {
                const exitBtn = document.getElementById('exitFullscreenBtn');
                if (!document.msFullscreenElement && exitBtn) {
                    exitBtn.classList.add('hidden');
                }
            });
            
            console.log('ğŸ‰ æŒ‰é’®äº‹ä»¶ç»‘å®šå®Œæˆ');
        }

        // DOMContentLoaded æ—¶åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ é¡µé¢DOMåŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–');
            
            // åˆå§‹åŒæ­¥è¯­è¨€
            syncLanguage();
            
            // ç»‘å®šæŒ‰é’®äº‹ä»¶
            bindButtonEvents();
            
            // åˆå§‹åŒ–æ¸¸æˆæ¨è
            const currentLang = localStorage.getItem(I18N_KEY) || 'cn';
            renderGameRecommendations(currentLang);
            
            // æ·»åŠ "æ¢ä¸€æ‰¹"æŒ‰é’®äº‹ä»¶ç›‘å¬å™¨ï¼ˆæ”¯æŒå›½é™…åŒ–ï¼‰
            const refreshBtn = document.getElementById('refreshRecommendations');
            if (refreshBtn) {
                refreshBtn.addEventListener('click', function() {
                    const currentLang = localStorage.getItem(I18N_KEY) || 'cn';
                    refreshRecommendations(currentLang);
                    console.log(`ğŸ”„ "æ¢ä¸€æ‰¹"æŒ‰é’®è¢«ç‚¹å‡»ï¼Œå½“å‰è¯­è¨€: ${currentLang}`);
                });
                console.log('âœ… "æ¢ä¸€æ‰¹"æŒ‰é’®äº‹ä»¶å·²ç»‘å®šï¼ˆæ”¯æŒå›½é™…åŒ–ï¼‰');
            } else {
                console.error('âŒ æœªæ‰¾åˆ°"æ¢ä¸€æ‰¹"æŒ‰é’® (id: refreshRecommendations)');
            }
            
            console.log('ğŸ¯ é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        });
        
        // ç¡®ä¿å‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å¯ç”¨ï¼ˆå‘åå…¼å®¹ï¼‰
        window.reloadGame = reloadGame;
        window.toggleFullscreen = toggleFullscreen;
        window.exitFullscreen = exitFullscreen;
    </script>
</body>
</html>
